<!DOCTYPE HTML>
<HTML>
<HEAD>
<TITLE>Ekuator</TITLE>
<STYLE type="text/css">
INPUT{
font-family : Arial;
color : #ad7d7d;
background-color : #000000;
border-color : #000000;
font-weight : bolder;
}
BUTTON{
font-family : Arial;
color : #ffffff;
background-color : #000000;
border-style : solid;
border-color : #b12424;
font-weight : bolder;
}
TABLE{
font-family : Arial;
color : #070707;
background-color : #ffffff;
font-size : xx-small;
font-weight : bolder;
}
BODY{
background-color : #ffffff;
font-family : Arial;
font-size : x-small;
}
</STYLE>
<script>
function loadUserSetting()
{ DefaultLongitude = -57.932772; // Put YOUR default local longitude here...

clock.longitude.value = DefaultLongitude;
document.getElementById( "longitude" ).readOnly = true; // no typing in displays allowed
document.getElementById( "degrees" ).readOnly = true;
document.getElementById( "minutes" ).readOnly = true;
document.getElementById( "seconds" ).readOnly = true;
document.getElementById( "meridian" ).readOnly = true;
document.getElementById( "degrees2" ).readOnly = true;
document.getElementById( "meridian2" ).readOnly = true;
document.getElementById( "date" ).readOnly = true;
document.getElementById( "utc" ).readOnly = true;
document.getElementById( "gmst" ).readOnly = true;
document.getElementById( "day" ).readOnly = true;
document.getElementById( "angle" ).readOnly = true;
document.getElementById( "lst" ).readOnly = true;

var InputValue = parseFloat( clock.longitude.value );
UpdateLongitude( InputValue ); // update all longitude displays

UpdateClock(); // Have longitude so bail and start clock update routine
}

function UpdateClock() //loop to keep time displays current
{
var long = parseFloat (clock.longitude.value); // get longitude variable from current form INPUT text value
// and convert to floating point number

var now = new Date(); // get current date & time from computer clock

var date = now.toLocaleString(); // format date as local full date and 12 hour clock
var utc = now.toUTCString(); // format utc as UTC date & time

var beg = new Date( now.getUTCFullYear() - 1, 11, 31 ); // get last day of previous year in milliseconds
var day = Math.floor( ( now - beg ) / 86400000 ); // compute integer day of year (86400000 ms/day)

var mst = getGMST( now ); // get adjusted GMST in degrees for current system time
var mstAngle = mst; // save for GMST Angle display

// compute integer GMST hour angle deg min sec
var gmstdeg = Math.floor( mstAngle ); // get integer GMST hour angle degrees right ascension of vernal equinox

mstAngle = mstAngle - gmstdeg; // get integer GMST hour angle minutes right ascension of vernal equinox
mstAngle = mstAngle * 60;
var gmstmin = Math.floor( mstAngle );

mstAngle = mstAngle - gmstmin; // get integer GMST hour angle seconds right ascension of vernal equinox
mstAngle = mstAngle * 60;
var gmstsec = Math.floor( mstAngle );

var lst = mst + long; // now we know GMST so just add local longitude offset

if( lst > 0.0 ) // circle goes round and round, adjust LST if < 0 or > 360 degrees
{
while( lst > 360.0 )
lst -= 360.0;
}
else
{
while( lst < 0.0 )
lst += 360.0;
}

var ras = lst; // save LST degrees right ascension for hour angle display

lst = lst / 15.0; // change LST from degrees to time units (15 deg/hour)
mst = mst / 15.0; // change MST from degrees to time units (15 deg/hour)

// compute integer LST hour angle deg min sec
var deg = Math.floor( ras ); // get integer hour angle degrees right ascension of vernal equinox

ras = ras - deg; // get integer hour angle minutes right ascension of vernal equinox
ras = ras * 60;
var min = Math.floor( ras );

ras = ras - min; // get integer hour angle seconds right ascension of vernal equinox
ras = ras * 60;
var sec = Math.floor( ras );

// compute local sidereal time hour minute second
hour = Math.floor( lst ); // get integer LST hour

lst = lst - hour; // get integer LST minute
lst = lst * 60;
minute = Math.floor( lst );

lst = lst - minute; //get integer LST second
lst = lst * 60;
second = Math.floor( lst );
// compute GMST time hours minutes seconds
hours = Math.floor( mst ); // get integer MST hours

mst = mst - hours; // get integer MST minutes
mst = mst * 60;
minutes = Math.floor( mst );

mst = mst - minutes; //get integer MST seconds
mst = mst * 60;
seconds = Math.floor( mst );

document.clock.date.value = " " + date; // update "clock" form displays
document.clock.utc.value = " " + utc;
document.clock.gmstangle.value = " " + addZero( gmstdeg ) + "° " + addZero( gmstmin ) + "\' " + addZero( gmstsec ) + "\"";
document.clock.gmst.value = " " + addZero( hours ) + " : " + addZero( minutes ) + " : " + addZero( seconds );
document.clock.day.value = " " + day ;
document.clock.angle.value = " " + addZero( deg ) + "° " + addZero( min ) + "\' " + addZero( sec ) + "\"";
document.clock.lst.value = " " + addZero( hour ) + " : " + addZero( minute ) + " : " + addZero( second );

newtime = window.setTimeout("UpdateClock();", 1000); // update all clock displays once per second
}

function addZero( n ) // adds leading zero if 1 digit number
{
if( n < 10 )
{
return "0" + n;
}
else
return n;
}

// Function getGMST computes Mean Sidereal Time (J2000)
// Input: Current Date
// Returns: Adjusted Greenwich Mean Sidereal Time (GMST) in degrees

function getGMST( now )
{
var year = now.getUTCFullYear(); // get UTC from computer clock date & time (var now)
var month = now.getUTCMonth() + 1;
var day = now.getUTCDate();
var hour = now.getUTCHours();
var minute = now.getUTCMinutes();
var second = now.getUTCSeconds();

if( month == 1 || month == 2 )
{
year = year - 1;
month = month + 12;
}

var lc = Math.floor( year/100 ); //integer # days / leap century
var ly = 2 - lc + Math.floor( lc/4 ); //integer # days / leap year
var y = Math.floor(365.25 * year); //integer # days / year
var m = Math.floor(30.6001 * (month + 1)); //integer # days / month

// now get julian days since J2000.0
var jd = ly + y + m - 730550.5 + day + (hour + minute/60.0 + second/3600.0)/24.0;

// julian centuries since J2000.0
var jc = jd/36525.0;

// Greenwich Mean Sidereal Time (GMST) in degrees
var GMST = 280.46061837 + 360.98564736629*jd + 0.000387933*jc*jc - jc*jc*jc/38710000;

if( GMST > 0.0 ) // circle goes round and round, adjust if < 0 or > 360 degrees
{
while( GMST > 360.0 )
GMST -= 360.0;
}
else
{
while( GMST < 0.0 )
GMST += 360.0;
}

return GMST; // in degrees
}

function newLongitude()
{
var Prompt = "ENTER Complete Local Longitude in +/- DEGREES";
var Example = "Enter -117.5310333 for West Longitude 117° 31' 51.71988\"";
var Default = DefaultLongitude;
var RangeMin = -180;
var RangeMax = 180;
var Decimals = 7; // 7 decimal places is 0.0000001 = 0.0004 arc seconds longitude is < 1/2" distance as the ant crawls

var InputValue = GetNumber( Prompt,Example,Default,RangeMin,RangeMax,Decimals ); // prompt for number value

if ( InputValue === false )
{
return;
}
else
{
UpdateLongitude(InputValue); // update longitude displays
}
}

function GetNumber( Prompt,Example,Default,RangeMin,RangeMax,Decimals )
{
var InputValue = prompt(Prompt + ": RANGE = ( " + RangeMin + " to " + RangeMax + " )\nEXAMPLE: " + Example , Default );

if ( InputValue == null || InputValue == "" )
{
return false; // prompt entry canceled or field returned blank so just ignore it
}
else if ( isNaN( InputValue ) == true )
{
alert("\"" +InputValue + "\" IS NOT A NUMBER: Please Input a Number...\nRANGE = ( " + RangeMin + " to " + RangeMax + " )");
return false; // prompt entry was not a number so alert user and ignore it
}
else if ( InputValue < RangeMin || InputValue > RangeMax )
{
alert("INPUT OUT OF RANGE: ( " + InputValue + " ) \nRANGE = ( " + RangeMin + " to " + RangeMax + " )");
return false; // prompt entry was a number but out of range so alert user and ignore it
}
else if ( Decimals == 0 )
{
InputValue = Math.floor(InputValue); // no decimals returned
return InputValue; // return it!
}
else
var InRange = new Number( InputValue ); // prompt entry number within range so create number object
InputValue = InRange.toFixed( Decimals ); // use number object to round to requested number of decimals
return InputValue; // return it!
}

function UpdateLongitude(InputValue)
{
var longitude = parseFloat(InputValue); // get decimal longitude from form input field

if ( longitude < 0.0 ) // Display Meridian value
{
document.clock.meridian.value = "West"; // negative = West
}
else if ( longitude > 0.0 )
{
document.clock.meridian.value = "East"; // positive = East
}
else
{
document.clock.meridian.value = "Prime"; // not E or W so must be Zero "Prime"
}

longitude = Math.abs(longitude); // throw away negative sign
var degrees = Math.floor( longitude ); // save integer degrees without sign

longitude = longitude - degrees; // get longitude minutes
longitude = longitude * 60;
var DecMinutes = longitude; // save decimal minutes
var minutes = Math.floor( longitude ); // save integer minutes

longitude = longitude - minutes; // get decimal longitude seconds
longitude = longitude * 60;
var seconds = longitude

var setDecimal = new Number( InputValue ); // restore longitude to number object
InputValue = setDecimal.toFixed(7); // use number object to round to 7 decimals

var setDecimal = new Number( DecMinutes ); // save minutes with decimals as object
var DecMinutes = setDecimal.toFixed(6); // use number object to round to 6 decimals

var setDecimal = new Number( seconds ); // save seconds with decimals as object
var seconds = setDecimal.toFixed(5); // use number object to round seconds to 5 decimals

document.clock.longitude.value = InputValue + "°"; // update all longitude displays

document.clock.degrees.value = degrees + "°";
document.clock.minutes.value = addZero( minutes ) + "\'";
document.clock.seconds.value = addZero( seconds ) + "\"";

document.clock.degrees2.value = document.clock.degrees.value
document.clock.dminutes.value = addZero( DecMinutes ) + "m";
document.clock.meridian2.value = document.clock.meridian.value

}

</script>

</HEAD>
<BODY onload="loadUserSetting()" background="../common/Background.gif">
<DIV id="Layer1" style="top:0px;left:0px;position:absolute;z-index : 3;">
<DIV id="sidebar" style="padding:0px 0px 0px 17px;float:left;"><IFRAME src="../navbar.html" width="88px" height="500px" frameborder="0" scrolling="no">
</IFRAME></DIV>
</DIV>
<DIV id="Layer2" style="top:0px;left:0px;position:absolute;z-index:2;">
<DIV id="viewer" style="padding:5px 20px 20px 148px;">
<DIV id="content" style="padding-left:20px;">
<!--CONTENT SECTION-->
<DIV style="padding:0px 0px 5px 0px;font-size:x-small;font-family:Arial;color:black;">
</DIV>
<NOSCRIPT><B><FONT style="font-size:x-small;color:red;">Sorry, your browser does not support JavaScript,</FONT>
<FONT style="font-size:x-small;color:red;">your browser is blocking client-side scripting,</FONT>
<FONT style="font-size:x-small;color:red;">or JavaScript is disabled in your security settings!</FONT></B></NOSCRIPT>
<CENTER>
<FORM name="clock">
<TABLE border="0" width="200" height="100" cellspacing="5" style="border-size : 4px;border-color : black;border-style : solid;">

<TR>
<TD colspan="2" align="left">
<CENTER>
<TABLE border="0" cellspacing="5" style="font-size : small;">
<TBODY>
<TR>
<TD align="center">SIDEREAL CLOCK JAVASCRIPT</TD>
</TR>
<TR>
<TD align="center"><FONT size="-1">Local Time</FONT></TD>
</TR>
<TR>
<TD align="center"><INPUT id="date" value="Requires Internet Explorer" size="42" style="font-size : medium;" type="text" onclick="ShowLocal()"></TD>
</TR>
</TBODY>
</TABLE>
</CENTER>
</TD>
</TR>
<TR>
<TD colspan="2" align="left">
<TABLE border="0" cellspacing="5" style="font-size : small;">
<TBODY>
<TR>
<TD align="center"><FONT size="-1">UTC Time (GMT)</FONT></TD>
<TD align="center"><FONT size="-1">GMST Angle</FONT></TD>
<TD align="center"><FONT size="-1">GMST</FONT></TD>
</TR>
<TR>
<TD align="center"><INPUT id="utc" value="0" size="29" style="font-size : medium;" type="text" onclick="ShowUTC()"></TD>
<TD align="center"><INPUT id="gmstangle" value="0" size="8" style="font-size : medium;" type="text" onclick="ShowGmstAngle()"></TD>
<TD align="center"><INPUT id="gmst" value="0" size="8" style="font-size : medium;" type="text" onclick="ShowGMST()"></TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR>
<TD align="left" valign="middle">
<TABLE border="0" style="font-size : small;">
<TBODY>
<TR>
<TD align="center" colspan="4">Local Longitude</TD>
</TR>
<TR>
<TD colspan="4">
<TABLE border="0" cellspacing="2" style="font-size : small;">
<TBODY>
<TR>
<TD><INPUT id="degrees" value="0" size="1" style="border-style : none;" type="text"></TD>
<TD align="center"><INPUT id="minutes" value="0" size="1" style="border-style : none;" type="text"></TD>
<TD><INPUT id="seconds" value="0" size="5" style="border-style : none;" type="text"></TD>
<TD><INPUT id="meridian" value="West" size="2" style="border-style : none;" type="text"></TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR>
<TD colspan="4">
<TABLE border="0" cellspacing="2" style="font-size : small;">
<TBODY>
<TR>
<TD><INPUT id="degrees2" value="0" size="1" style="border-style : none;" type="text"></TD>
<TD align="center"><INPUT id="dminutes" value="0" size="7" style="border-style : none;" type="text"></TD>
<TD><INPUT id="meridian2" value="West" size="2" style="border-style : none;" type="text"></TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR>
<TD colspan="4" align="center">
<TABLE border="0" cellspacing="2" style="font-size : small;">
<COL span="1">
<COL span="1" width="50">
<TBODY>
<TR>
<TD align="left"><INPUT class="userData" id="longitude" value="0" size="9" type="text"></TD>
<TD align="center">
<BUTTON type="button" name="set-up" value="set-up" onclick="newLongitude()">Set-up</BUTTON>
</TD>
<TD align="right">
<BUTTON type="button" name="about" value="about" onclick="ShowAbout()">About</BUTTON>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
<TD align="right" valign="bottom">
<TABLE border="0" cellspacing="5" style="font-size : small;">
<TBODY>
<TR>
<TD colspan="2">
<TABLE border="0" cellspacing="5" style="font-size : small;">
<TBODY>
<TR>
<TD align="center"><FONT size="-1">Year Day</FONT></TD>
<TD align="center"><FONT size="-1">LST Angle</FONT></TD>
</TR>
<TR>
<TD align="center"><INPUT id="day" value="0" size="6" style="font-size : medium;" type="text" onclick="ShowDay()"></TD>
<TD align="center"><INPUT id="angle" value="0" size="8" style="font-size : medium;" type="text" onclick="ShowAngle()"></TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
<TR>
<TD colspan="2" align="center">
<TABLE border="0" cellspacing="5" style="font-size : small;">
<TBODY>
<TR>
<TD align="center">Local Sidereal Time</TD>
</TR>
<TR>
<TD align="center" valign="top"><INPUT id="lst" value="0" size="8" style="font-size : x-large;" type="text" onclick="ShowLST()"></TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TBODY>
</TABLE>
</TD>
</TR>
</TABLE>
</FORM>
</CENTER>
</BODY>
</HTML>